# GitHub OAuth App æ³¨å†ŒæŒ‡å—

## ç¬¬ä¸€æ­¥ï¼šè®¿é—®æ³¨å†Œé¡µé¢

**æ–¹å¼ 1ï¼šç›´æ¥è®¿é—®**
```
https://github.com/settings/developers
```

**æ–¹å¼ 2ï¼šæ‰‹åŠ¨å¯¼èˆª**
1. æ‰“å¼€ https://github.com
2. å¦‚æœæ²¡ç™»å½•ï¼Œå…ˆç™»å½•ï¼ˆæˆ–æ³¨å†Œæ–°è´¦å·ï¼‰
3. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ Settings
4. å·¦ä¾§èœå•æœ€ä¸‹æ–¹ â†’ Developer settings
5. å·¦ä¾§èœå• â†’ OAuth Apps
6. ç‚¹å‡» "New OAuth App" æŒ‰é’®

## ç¬¬äºŒæ­¥ï¼šå¡«å†™è¡¨å•

```
Application name:
  MoonLens

Homepage URL:
  http://localhost:5173

Application description (optional):
  AI-powered code review tool for GitLab and GitHub

Authorization callback URL:
  http://localhost:3000/auth/github/callback
```

**æˆªå›¾ç¤ºæ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Register a new OAuth application                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ Application name *                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ MoonLens                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ Homepage URL *                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ http://localhost:5173                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ Application description (optional)              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI-powered code review tool                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ Authorization callback URL *                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ http://localhost:3000/auth/github/callback  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚         [Register application]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç¬¬ä¸‰æ­¥ï¼šè·å– Client ID

æ³¨å†ŒæˆåŠŸåä¼šæ˜¾ç¤ºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MoonLens                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ Client ID                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Iv1.1a2b3c4d5e6f7g8h                        â”‚ â”‚ â† å¤åˆ¶è¿™ä¸ª
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ Client secrets                                  â”‚
â”‚ [Generate a new client secret]  â† ç‚¹å‡»è¿™ä¸ªæŒ‰é’®   â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…ˆå¤åˆ¶ Client IDï¼š**
```bash
GITHUB_CLIENT_ID=Iv1.1a2b3c4d5e6f7g8h
```

## ç¬¬å››æ­¥ï¼šç”Ÿæˆ Client Secret

ç‚¹å‡» "Generate a new client secret" æŒ‰é’®åï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client secrets                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ abc123def456ghi789jkl012mno345pqr678...     â”‚ â”‚ â† å¤åˆ¶è¿™ä¸ª
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚ âš ï¸  Make sure you copy your new client secret  â”‚
â”‚     now. You won't be able to see it again!    â”‚
â”‚                                                 â”‚
â”‚ Generated less than a minute ago               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç«‹å³å¤åˆ¶ Client Secretï¼ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰**

## ç¬¬äº”æ­¥ï¼šæ·»åŠ åˆ° .env

```bash
cd MoonLens-server

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ æˆ–æ›´æ–°ï¼š
GITHUB_CLIENT_ID=Iv1.1a2b3c4d5e6f7g8h
GITHUB_CLIENT_SECRET=abc123def456ghi789jkl012mno345pqr678...
GITHUB_REDIRECT_URI=http://localhost:3000/auth/github/callback
```

## ç¬¬å…­æ­¥ï¼šéªŒè¯é…ç½®

```bash
# æ£€æŸ¥é…ç½®
cat .env | grep GITHUB

# åº”è¯¥çœ‹åˆ°ï¼š
# GITHUB_CLIENT_ID=Iv1....
# GITHUB_CLIENT_SECRET=abc123....
# GITHUB_REDIRECT_URI=http://localhost:3000/auth/github/callback
```

## å®Œæ•´ .env ç¤ºä¾‹

```bash
# ============ OAuth é…ç½® ============

# GitLab OAuth
GITLAB_CLIENT_ID=your_gitlab_app_id
GITLAB_CLIENT_SECRET=your_gitlab_secret
GITLAB_REDIRECT_URI=http://localhost:3000/auth/gitlab/callback

# GitHub OAuth
GITHUB_CLIENT_ID=Iv1.your_github_client_id
GITHUB_CLIENT_SECRET=your_github_secret
GITHUB_REDIRECT_URI=http://localhost:3000/auth/github/callback

# Frontend
FRONTEND_URL=http://localhost:5173

# JWT
JWT_SECRET=dev-super-secret
JWT_EXPIRES_IN=7d

# ============ å…¶ä»–é…ç½®ï¼ˆä¿æŒä¸å˜ï¼‰============
DATABASE_URL=mysql://root:password@localhost:3306/moonlens_db
```

## æµ‹è¯• OAuth é…ç½®

å¯åŠ¨åç«¯ååœ¨æµè§ˆå™¨è®¿é—®ï¼š

```bash
# å¯åŠ¨åç«¯
npm run start:dev

# æµè§ˆå™¨è®¿é—®ï¼ˆä¼šè·³è½¬åˆ° GitHub æˆæƒé¡µé¢ï¼‰
http://localhost:3000/auth/github/login
```

å¦‚æœçœ‹åˆ° GitHub æˆæƒé¡µé¢ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Authorize MoonLens                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ MoonLens by [ä½ çš„ GitHub ç”¨æˆ·å]                â”‚
â”‚ wants to access your GitHub account             â”‚
â”‚                                                 â”‚
â”‚ This application will be able to:               â”‚
â”‚ â€¢ Read your user profile                        â”‚
â”‚ â€¢ Access your repositories                      â”‚
â”‚                                                 â”‚
â”‚    [Authorize MoonLens]  [Cancel]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

âœ… å®Œæˆï¼GitHub OAuth App å·²æ³¨å†Œã€‚

## å¸¸è§é—®é¢˜

### Q: å¿˜è®°å¤åˆ¶ Client Secret äº†æ€ä¹ˆåŠï¼Ÿ
A:
1. å›åˆ° GitHub OAuth App é¡µé¢
2. æ‰¾åˆ° "Client secrets" éƒ¨åˆ†
3. ç‚¹å‡» "Generate a new client secret"
4. æ—§çš„ Secret ä¼šè¢«åºŸå¼ƒï¼Œä½¿ç”¨æ–°çš„å³å¯

### Q: å›è°ƒ URL å¯ä»¥æ”¹å—ï¼Ÿ
A:
- å¼€å‘ç¯å¢ƒï¼šå¿…é¡»æ˜¯ `http://localhost:3000/auth/github/callback`
- ç”Ÿäº§ç¯å¢ƒï¼šæ”¹æˆä½ çš„åŸŸåï¼Œå¦‚ `https://moonlens.com/auth/github/callback`
- ä¿®æ”¹åéœ€è¦åœ¨ GitHub OAuth App é¡µé¢æ›´æ–°

### Q: æ˜¾ç¤º "redirect_uri_mismatch" é”™è¯¯ï¼Ÿ
A:
1. æ£€æŸ¥ `.env` ä¸­çš„ `GITHUB_REDIRECT_URI`
2. ç¡®ä¿ä¸ GitHub OAuth App ä¸­çš„ "Authorization callback URL" å®Œå…¨ä¸€è‡´
3. æ³¨æ„ http/https, ç«¯å£å·, è·¯å¾„éƒ½è¦å®Œå…¨åŒ¹é…

---

## ğŸ‰ æ³¨å†Œå®Œæˆå

å½“ä½ å®Œæˆæ³¨å†Œå¹¶é…ç½®å¥½ `.env` åï¼Œå‘Šè¯‰æˆ‘ï¼š

**"GitHub OAuth App å·²æ³¨å†Œå®Œæˆ"**

æˆ‘ä¼šç»§ç»­å¸®ä½ ï¼š
1. åˆ›å»ºå‰©ä½™çš„ä»£ç æ–‡ä»¶
2. åˆ›å»ºæ•°æ®åº“è¡¨
3. å¯åŠ¨æµ‹è¯• OAuth æµç¨‹
